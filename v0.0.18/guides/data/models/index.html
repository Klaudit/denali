<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="/">

    <title> Models  </title>

    <link href='//fonts.googleapis.com/css?family=Inconsolata|Bitter:400,700|Open+Sans:300,400,400italic,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-dropdown/2.0.3/jquery.dropdown.min.css" />
  </head>
  <body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-2.2.2.min.js"><\/script>')</script>
    <nav class="navbar">
  <div class='container'>
    <a href='.' class='navbar-brand'>
      <img class='logo-light' src='images/logo.svg' alt='Denali'>
      <span class='project-name'>Denali</span>
    </a>

    <div class="navbar-nav">
      
      <a class='nav-link' href='v0.0.18/guides/overview/quickstart'>Quickstart</a>
      <a class='nav-link' href='v0.0.18/guides/overview/introduction'>Guides</a>
      <a class='nav-link' href='v0.0.18/api/modules/denali'>API</a>
      <a class='nav-link' href='https://github.com/denali-js/denali' target='_blank'>Github</a>
      <a class='nav-link' href='https://github.com/denali-js/denali/issues' target='_blank'>Issues</a>
    </div>
  </div>
</nav>

<div class='container'>
  <div class="row">
    <div class='guides-nav col-md-3'>
      <div class='nav-section'>
  <div class='nav-header'>Version</div>
  <div class='versions-menu-toggle' data-jq-dropdown='#versions-menu'>
    v0.0.18 
    <img class='versions-menu-caret' src='/images/caret.svg'>
  </div>
</div>

      
        <div class="nav-section">
          
            <div class='nav-header'>Overview</div>
          
          
            <a href='v0.0.18/guides/overview/introduction' class='nav-link'>Introduction</a>
          
            <a href='v0.0.18/guides/overview/quickstart' class='nav-link'>Quickstart</a>
          
            <a href='v0.0.18/guides/overview/app-structure' class='nav-link'>App Structure</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>Application</div>
          
          
            <a href='v0.0.18/guides/application/routing' class='nav-link'>Routing</a>
          
            <a href='v0.0.18/guides/application/actions' class='nav-link'>Actions</a>
          
            <a href='v0.0.18/guides/application/services' class='nav-link'>Services</a>
          
            <a href='v0.0.18/guides/application/errors' class='nav-link'>Errors</a>
          
            <a href='v0.0.18/guides/application/mailers' class='nav-link'>Mailers</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>Data</div>
          
          
            <a href='v0.0.18/guides/data/models' class='nav-link'>Models</a>
          
            <a href='v0.0.18/guides/data/serializers' class='nav-link'>Serializers</a>
          
            <a href='v0.0.18/guides/data/orm-adapters' class='nav-link'>ORM Adapters</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>Testing</div>
          
          
            <a href='v0.0.18/guides/testing/integration' class='nav-link'>Integration</a>
          
            <a href='v0.0.18/guides/testing/unit' class='nav-link'>Unit Testing</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>Configuration</div>
          
          
            <a href='v0.0.18/guides/configuration/environment' class='nav-link'>Environment</a>
          
            <a href='v0.0.18/guides/configuration/middleware' class='nav-link'>Middleware</a>
          
            <a href='v0.0.18/guides/configuration/initializers' class='nav-link'>Initializers</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>Utilities</div>
          
          
            <a href='v0.0.18/guides/utilities/mixins' class='nav-link'>Mixins</a>
          
            <a href='v0.0.18/guides/utilities/addons' class='nav-link'>Addons</a>
          
            <a href='v0.0.18/guides/utilities/instrumentation' class='nav-link'>Instrumentation</a>
          
        </div>
      
        <div class="nav-section">
          
            <div class='nav-header'>CLI</div>
          
          
            <a href='v0.0.18/guides/cli/generate' class='nav-link'>denali generate</a>
          
            <a href='v0.0.18/guides/cli/serve' class='nav-link'>denali serve</a>
          
            <a href='v0.0.18/guides/cli/test' class='nav-link'>denali test</a>
          
            <a href='v0.0.18/guides/cli/build' class='nav-link'>denali build</a>
          
            <a href='v0.0.18/guides/cli/addon' class='nav-link'>denali addon</a>
          
            <a href='v0.0.18/guides/cli/console' class='nav-link'>denali console</a>
          
        </div>
      
    </div>

    <div class='col-md-9 guides-body copy'>
      <a class="improve-btn" target="_blank" href="https://github.com/denali-js/denali/edit/master/guides/data/models.md">Improve this page</a>
      <h1 id="models">Models</h1>
<p>Denali&#39;s Models are actually just thin wrappers over your own ORM&#39;s model instances. They leverage <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxies</a> to let your ORM&#39;s methods and properties to continue to work, while guaranteeing a basic common interface across all ORMs.</p>
<h2 id="defining-a-model">Defining a Model</h2>
<p>Models are defined in the <code>app/models/</code> folder. Conventionally, models extend from a common base, the ApplicationModel:</p>
<pre><code class="lang-js"><span class="hljs-comment">// app/models/application.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-type">Model</span> } from <span class="hljs-symbol">'denal</span>i';

export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApplicationModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{
  <span class="hljs-comment">// add any common, application-wide model functionality here</span>
}
</code></pre>
<p>Let&#39;s create a basic model representing a blog post:</p>
<pre><code class="lang-js"><span class="hljs-comment">// app/models/post.js</span>
<span class="hljs-keyword">import</span> { attr } from <span class="hljs-symbol">'denal</span>i';
<span class="hljs-keyword">import</span> <span class="hljs-type">ApplicationModel</span> from './application';

export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ApplicationModel</span> </span>{

  static title = attr(<span class="hljs-symbol">'tex</span>t');

}
</code></pre>
<p>Here we started out by adding a <code>title</code> attribute to our Post model. We use the <code>attr()</code> method exported by Denali to define an attribute. The single argument is the data type of that attribute.</p>
<h3 id="data-types">Data Types</h3>
<p>Denali provides a common base set of data types for most ORM adapters:</p>
<ul>
<li><code>text</code></li>
<li><code>number</code></li>
<li><code>date</code></li>
<li><code>boolean</code></li>
<li><code>object</code></li>
</ul>
<p>In addition to the basic data types, your ORM adapter can support additional, more specialized data types (i.e. <code>integer</code> rather than <code>number</code>).</p>
<p>Keep in mind that each ORM adapter decides for itself how best to implement these common data types, and it may be more performant to go with an ORM-specific type in some cases. For example, ORMs for SQL based data stores should implement the <code>number</code> data type as a <code>float</code> or <code>double</code> rather than an <code>integer</code>, since JavaScript numbers are floating point.</p>
<p>The value of the common base set of data types is that it allows addons that manage data attributes to safely assume a certain subset of data types.</p>
<h3 id="relationships">Relationships</h3>
<p>In addition to basic data attributes, you can also define relationships on your model classes (assuming your ORM supports relationships):</p>
<pre><code class="lang-js"><span class="hljs-comment">// app/models/post.js</span>
<span class="hljs-keyword">import</span> { attr, hasMany, hasOne } from <span class="hljs-symbol">'denal</span>i';
<span class="hljs-keyword">import</span> <span class="hljs-type">ApplicationModel</span> from './application';

export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ApplicationModel</span> </span>{

  static title = attr(<span class="hljs-symbol">'tex</span>t');
  static comments = hasMany(<span class="hljs-symbol">'commen</span>t');
  static author = hasOne(<span class="hljs-symbol">'use</span>r');

}
</code></pre>
<h2 id="querying-data">Querying Data</h2>
<p>Models expose the <code>.find()</code> static method for querying data. It has a few basic forms:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Find post with id 1</span>
<span class="hljs-selector-tag">Post</span><span class="hljs-selector-class">.find</span>(<span class="hljs-number">1</span>);

<span class="hljs-comment">// Find posts that match the filter</span>
<span class="hljs-selector-tag">Post</span><span class="hljs-selector-class">.find</span>({ <span class="hljs-attribute">title</span>: <span class="hljs-string">'My cool post'</span> });

<span class="hljs-comment">// Find posts using ORM specific querying</span>
<span class="hljs-selector-tag">Post</span><span class="hljs-selector-class">.find</span>((<span class="hljs-comment">/* Your ORM can pass in arguments, i.e. a query builder */</span>) =&gt; {
  <span class="hljs-comment">// You can use ORM-specific syntax here</span>
});
</code></pre>
<p>The second and third forms are ORM-specific - you should consult your ORM adapter&#39;s docs for details on the semantics and querying interfaces.</p>
<p>Models also expose the <code>.findOne()</code> static method, which is just syntatic sugar for:</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> posts = <span class="hljs-keyword">await</span> Post.find({ foo: <span class="hljs-string">'bar'</span> });
posts[<span class="hljs-number">0</span>];
</code></pre>
<h2 id="saving-data">Saving Data</h2>
<p>Models expose a <code>.save()</code> instance method that returns a promise which resolves or rejects when the save operation is complete.</p>

    </div>
  </div>
</div>

<footer class="footer">
  <div class='container'>
    Made with <img src='images/fox-and-beard.svg' class='fox-and-beard'> at
    <a href='http://foxandbeard.co' target='_blank'>Fox and Beard</a>
  </div>
</footer>

  <div id='versions-menu' class='versions-menu jq-dropdown jq-dropdown-tip'>
    <ul class='jq-dropdown-menu'>
      
        <li>
          
            <a href='/v0.0.21/guides/data/models'>v0.0.21 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.20/guides/data/models'>v0.0.20 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.19/guides/data/models'>v0.0.19 </a>
          
        </li>
      
        <li>
          
            <a class='active'>v0.0.18 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.17/guides/data/models'>v0.0.17 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.16/guides/data/models'>v0.0.16 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.15/guides/data/models'>v0.0.15 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.14/guides/data/models'>v0.0.14 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.13/guides/data/models'>v0.0.13 (canary)</a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.12/guides/data/models'>v0.0.12 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.11/guides/data/models'>v0.0.11 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.10/guides/data/models'>v0.0.10 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.9/guides/data/models'>v0.0.9 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.8/guides/data/models'>v0.0.8 </a>
          
        </li>
      
        <li>
          
            <a href='/v0.0.7/guides/data/models'>v0.0.7 </a>
          
        </li>
      
        <li>
          
            <a href='/master/guides/data/models'>master </a>
          
        </li>
      
    </ul>
  </div>
  <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery-dropdown/2.0.3/jquery.dropdown.min.js'></script>



    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
     ga('create', 'UA-85043775-1', 'auto');
     ga('send', 'pageview');
    </script>
  </body>
</html>
