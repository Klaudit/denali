<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base href="/denali/">

  <title>Serializers</title>
  <meta name="description" content="">

  <link href='//fonts.googleapis.com/css?family=Inconsolata|Bitter:400,700|Open+Sans:300,400,400italic,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/main.css">
  <link rel="canonical" href="https://davewasmer.github.com/denali/guides/serializers/">
</head>

  <body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-2.2.2.min.js"><\/script>')</script>
    <nav class="navbar">
  <div class='container'>
    <a href='.' class='navbar-brand'>
      <img class='logo-light' src='images/logo.svg' alt='Denali'>
      <span class='project-name'>Denali</span>
    </a>

    <div class="navbar-nav">
      <a class='nav-link' href='canary/guides/quickstart'>Quickstart</a>
      <a class='nav-link' href='canary/guides/introduction'>Guides</a>
      <a class='nav-link' href='canary/api'>API</a>
      <a class='nav-link' href='https://github.com/davewasmer/denali' target='_blank'>Github</a>
      <a class='nav-link' href='https://github.com/davewasmer/denali/issues' target='_blank'>Issues</a>
    </div>
  </div>
</nav>

<div class='container'>
  <div class="row">
    <div class='guides-nav col-md-3'>

  <div class='nav-section'>
  <div class='nav-header'>Version</div>
  <select class='versions-select' id='versions'>
    
      <option value='canary' selected='selected'>canary</option>
    
  </select>
</div>


  
    <div class="nav-section">
      
      
        <a href='canary/guides/introduction/' class='nav-link'>Introduction</a>
      
        <a href='canary/guides/quickstart/' class='nav-link'>Quickstart</a>
      
        <a href='canary/guides/app-structure/' class='nav-link'>App Structure</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>Application</div>
      
      
        <a href='canary/guides/routing/' class='nav-link'>Routing</a>
      
        <a href='canary/guides/actions/' class='nav-link'>Actions</a>
      
        <a href='canary/guides/services/' class='nav-link'>Services</a>
      
        <a href='canary/guides/errors/' class='nav-link'>Errors</a>
      
        <a href='canary/guides/mailers/' class='nav-link'>Mailers</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>Data</div>
      
      
        <a href='canary/guides/models/' class='nav-link'>Models</a>
      
        <a href='canary/guides/serializers/' class='nav-link'>Serializers</a>
      
        <a href='canary/guides/orm-adapters/' class='nav-link'>ORM Adapters</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>Testing</div>
      
      
        <a href='canary/guides/integration/' class='nav-link'>Integration</a>
      
        <a href='canary/guides/unit/' class='nav-link'>Unit Testing</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>Configuration</div>
      
      
        <a href='canary/guides/environment/' class='nav-link'>Environment</a>
      
        <a href='canary/guides/middleware/' class='nav-link'>Middleware</a>
      
        <a href='canary/guides/initializers/' class='nav-link'>Initializers</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>Utilities</div>
      
      
        <a href='canary/guides/mixins.js' class='nav-link'>Mixins</a>
      
        <a href='canary/guides/addons/' class='nav-link'>Addons</a>
      
        <a href='canary/guides/instrumentation/' class='nav-link'>Instrumentation</a>
      
    </div>
  
    <div class="nav-section">
      
        <div class='nav-header'>CLI</div>
      
      
        <a href='canary/guides/generate/' class='nav-link'>denali generate</a>
      
        <a href='canary/guides/serve/' class='nav-link'>denali serve</a>
      
        <a href='canary/guides/test/' class='nav-link'>denali test</a>
      
        <a href='canary/guides/build/' class='nav-link'>denali build</a>
      
        <a href='canary/guides/addon/' class='nav-link'>denali addon</a>
      
        <a href='canary/guides/console/' class='nav-link'>denali console</a>
      
    </div>
  

</div>

    <div class='col-md-9 guides-body copy'>
      <a class="improve-btn" target="_blank" href="https://github.com/davewasmer/denali/edit/master/guides/serializers.md">Improve this page</a>
      <h1 id="serializers">Serializers</h1>

<p>Since Denali is API focused, it doesn’t ship with any kind of view layer for
rendering HTML. However, one way to think of Serializers is like the view layer
for a JSON only API.</p>

<p>When your app needs to send some data in a response, there’s three problems to
face:</p>

<ol>
  <li>
    <p><strong>What data to send</strong>: you’ll often want to send only a subset of your
  record back (i.e. omitting a hashed password).</p>
  </li>
  <li>
    <p><strong>Transforming the data</strong>: you may want to transform the content to make it
  easier to consume or to match consumer expectations (i.e. change underscore_
  keys to camelCaseKeys).</p>
  </li>
  <li>
    <p><strong>Structuring the data</strong>: what is the structure of the response? Is there a
root JSON wrapper? Does it conform to a spec, i.e. JSON-API 1.0?</p>
  </li>
</ol>

<p>Serializers address all of these problems. They select what data to send, apply
transformations to that data (i.e. renaming keys, serializing values), and
structure the result according to a particular output format.</p>

<p>Typically, your API will have a standard output format (i.e. JSON-API 1.0). A
good approach is to pick (or create) a base ApplicationSerializer class that
renders that structure, much like we used a base ApplicationAction class.</p>

<p>With a base ApplicationSerializer class in place, you’ll then create a subclass
for each model you have (PostSerializer, UserSerializer, etc). These subclasses
tell Denali what attributes and relationships should be sent in a response that
contains that particular model.</p>

<h2 id="rendering-data-in-a-response">Rendering data in a response</h2>

<p>Serializers render data based on <em>whitelists</em>. That means that if you want any
part of your Model to render into JSON in the response body, you must specify
it explicitly in that Model’s Serializer. This ensures you won’t
accidentally return sensitive data in a response because you forgot to strip it
out.</p>

<p>Selecting which attributes to render is as simple as adding them to the
attributes array on your serializer:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">UserSerializer</span> <span class="kr">extends</span> <span class="nx">ApplicationSerializer</span> <span class="p">{</span>

  <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'firstName'</span><span class="p">,</span> <span class="s1">'lastName'</span> <span class="p">];</span>

<span class="p">}</span>
</code></pre>
</div>

<p>Relationships are slightly more complex.</p>

<p>TODO documentation for relationship serializers</p>

<h1 id="built-in-serializers">Built-in Serializers</h1>

<p>Denali ships with two base serializers out of the box:</p>

<ul>
  <li>
    <p><strong>FlatSerializer</strong>, which renders models as simple JSON objects or arrays of
  objects. Related records are directly embedded under their relationship name.</p>
  </li>
  <li>
    <p><strong>JSONAPISerializer</strong>, a [JSON-API 1.0] compliant serializer with support
  for meta, links, errors, and more.</p>
  </li>
</ul>


    </div>
  </div>
</div>

<footer class="footer">
  <div class='container'>
    Made with <img src='images/fox-and-beard.svg' class='fox-and-beard'> at
    <a href='http://foxandbeard.co' target='_blank'>Fox and Beard</a>
  </div>
</footer>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
    function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='//www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X','auto');ga('send','pageview');
</script>


  </body>
</html>
