#!/usr/bin/env node

require('babel-register');
var findup = require('findup-sync');

var pkgPath = findup('package.json');

// No package.json found, revert to global install
if (!pkgPath) {
  require('../lib/cli/commands');

// Package.json found
} else {

  var pkgDir = path.dirname(pkgPath);
  var localDenali = resolve.sync('denali', { basedir: pkgDir });

  if (!localDenali) {
    require('../lib/cli/commands');
  } else {
    var localDenaliPkgDir = findup('package.json', { cwd: localDenali });
    require(path.join(localDenaliPkgDir, 'lib/cli/commands'));
  }
}

