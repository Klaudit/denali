#!/usr/bin/env node

require('babel-register');
var path = require('path');
var resolve = require('resolve');
var findup = require('findup-sync');

var pkgPath = findup('package.json');

// No package.json found, revert to global install
if (!pkgPath) {
  require('../lib/cli/commands');

// Package.json found
} else {

  var pkgDir = path.dirname(pkgPath);
  var localDenali;
  try {
    localDenali = resolve.sync('denali', { basedir: pkgDir });
  } catch(e) {
    return require('../lib/cli/commands');
  }


  var localDenaliPkgDir = findup('package.json', { cwd: localDenali });
  require(path.join(localDenaliPkgDir, 'lib/cli/commands'));
}

