<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base href="/denali/">

  <title>Denali</title>
  <meta name="description" content="">

  <link href='//fonts.googleapis.com/css?family=Inconsolata|Bitter:400,700|Open+Sans:300,400,400italic,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/main.css">
  <link rel="canonical" href="https://davewasmer.github.com/denali/latest/api/classes/Action/">
</head>

  <body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-2.2.2.min.js"><\/script>')</script>
    <nav class="navbar">
  <div class='container'>
    <a href='.' class='navbar-brand'>
      <img class='logo-light' src='images/logo.svg' alt='Denali'>
      <span class='project-name'>Denali</span>
    </a>

    <div class="navbar-nav">
      <a class='nav-link' href='latest/guides/quickstart'>Quickstart</a>
      <a class='nav-link' href='latest/guides/introduction'>Guides</a>
      <a class='nav-link' href='latest/api'>API</a>
      <a class='nav-link' href='https://github.com/davewasmer/denali' target='_blank'>Github</a>
      <a class='nav-link' href='https://github.com/davewasmer/denali/issues' target='_blank'>Issues</a>
    </div>
  </div>
</nav>

<div class='container'>
  <div class='row'>
    <div class='api-nav col-md-3'>

      <div class='nav-section'>
  <div class='nav-header'>Version</div>
  <select class='versions-select' id='versions'>
    
      <option value='canary' >canary</option>
    
      <option value='v0.0.4' >v0.0.4</option>
    
      <option value='latest' selected='selected'>latest</option>
    
  </select>
</div>


      <label class='private-classes-toggle'>
        <input type='checkbox' id='toggle-private-classes'>
        Include Private
      </label>

      
        
      
        
          <div class='nav-section'>
            <div class='nav-header'>Cli</div>
            
              <a class='nav-link ' href='latest/api/classes/Blueprint' >Blueprint</a>
            
              <a class='nav-link ' href='latest/api/classes/Command' >Command</a>
            
          </div>
        
      
        
          <div class='nav-section'>
            <div class='nav-header'>Data</div>
            
              <a class='nav-link ' href='latest/api/classes/FlatSerializer' >FlatSerializer</a>
            
              <a class='nav-link ' href='latest/api/classes/JSONAPISerializer' >JSONAPISerializer</a>
            
              <a class='nav-link ' href='latest/api/classes/Model' >Model</a>
            
              <a class='nav-link ' href='latest/api/classes/ORMAdapter' >ORMAdapter</a>
            
              <a class='nav-link ' href='latest/api/classes/Serializer' >Serializer</a>
            
          </div>
        
      
        
          <div class='nav-section'>
            <div class='nav-header'>Metal</div>
            
              <a class='nav-link ' href='latest/api/classes/eachPrototype' >eachPrototype</a>
            
              <a class='nav-link ' href='latest/api/classes/Instrumentation' >Instrumentation</a>
            
              <a class='nav-link ' href='latest/api/classes/mixin' >mixin</a>
            
              <a class='nav-link ' href='latest/api/classes/createMixin' >createMixin</a>
            
          </div>
        
      
        
          <div class='nav-section'>
            <div class='nav-header'>Runtime</div>
            
              <a class='nav-link active' href='latest/api/classes/Action' >Action</a>
            
              <a class='nav-link ' href='latest/api/classes/Addon' >Addon</a>
            
              <a class='nav-link ' href='latest/api/classes/Application' >Application</a>
            
              <a class='nav-link ' href='latest/api/classes/Container' >Container</a>
            
              <a class='nav-link ' href='latest/api/classes/Error' >Error</a>
            
              <a class='nav-link ' href='latest/api/classes/Logger' >Logger</a>
            
              <a class='nav-link ' href='latest/api/classes/Mailer' >Mailer</a>
            
              <a class='nav-link ' href='latest/api/classes/Request' >Request</a>
            
              <a class='nav-link ' href='latest/api/classes/Response' >Response</a>
            
              <a class='nav-link ' href='latest/api/classes/Router' >Router</a>
            
              <a class='nav-link ' href='latest/api/classes/Service' >Service</a>
            
          </div>
        
      

    </div>

    <div class='api-body col-md-9'>
      <div class='class'>
  <h1 class='class-name'>
    
    Action
  </h1>
  
    <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L25'>
      <span class='filename'>Defined in: lib/runtime/action.js</span>
      <span class='line'>Line: 25</span>
    </a>
  

  <div class='class-module'>
    <strong>Module:</strong>
    <span class='class-module-name'>denali.runtime</span>
  </div>

  
    <div class='class-description'><p>Actions form the core of interacting with a Denali application. They are
the controller layer in the MVC architecture, taking in incoming requests,
performing business logic, and handing off to the renderer to send the
response.</p>

<p>When a request comes in, Denali will invoke the <code class="highlighter-rouge">respond</code> method (or
<code class="highlighter-rouge">respondWith__</code> for content negotiated requests) on the
matching Action class. The return value (or resolved return value) of this
method is used to render the response.</p>

<p>Actions also support filters. Simply define a method on your action, and add
the method name to the <code class="highlighter-rouge">before</code> or <code class="highlighter-rouge">after</code> array. Filters behave similar to
responders in that they recieve the request params and can return a promise
which will be waited on before continuing. Filters are inheritable, so child
classes will run filters added by parent classes.</p>
</div>
  

  <div class='display-controls'>
    <label class='toggle'>
      <input type='checkbox' id='toggle-private-members'>
      Show Private
    </label>
    <label class='toggle'>
      <input type='checkbox' id='toggle-deprecated-members'>
      Show Deprecated
    </label>
  </div>
  <div class='summary'>
    <div class='summary-section'>
      <div class='summary-header'>Methods</div>
      
        
          <a class='summary-link'  href='latest/api/classes/Action/#_buildFilterChains'>_buildFilterChains</a>
        
      
        
          <a class='summary-link'  href='latest/api/classes/Action/#_invokeFilters'>_invokeFilters</a>
        
      
        
          <a class='summary-link'  data-private-member=true  href='latest/api/classes/Action/#_pickBestResponder'>_pickBestResponder</a>
        
      
        
      
        
      
        
      
        
          <a class='summary-link'  href='latest/api/classes/Action/#modelFor'>modelFor</a>
        
      
        
          <a class='summary-link'  data-private-member=true  href='latest/api/classes/Action/#render'>render</a>
        
      
        
          <a class='summary-link'  data-private-member=true  href='latest/api/classes/Action/#run'>run</a>
        
      
        
          <a class='summary-link'  href='latest/api/classes/Action/#service'>service</a>
        
      
    </div>
    <div class='summary-section'>
      <div class='summary-header'>Properties</div>
      
        
      
        
      
        
      
        
          <a class='summary-link'  href='#after'>after</a>
        
      
        
          <a class='summary-link'  href='#before'>before</a>
        
      
        
          <a class='summary-link'  href='#config'>config</a>
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
</div>

<div class='classitems'>
  
    
  
    
  
    
  
    
      <div class='item property' id='after' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            after<span class="type">:Array</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L66'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 66</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Invoked before the <code class="highlighter-rouge">respond()</code> method. The framework will invoke filters
from parent classes and mixins in the same order the mixins were
applied.</p>

<p>Filters can be synchronous, or return a promise (which will pause the
before/respond/after chain until it resolves).</p>
</div>
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L66'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item property' id='before' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            before<span class="type">:Array</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L47'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 47</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Invoked before the <code class="highlighter-rouge">respond()</code> method. The framework will invoke filters
from parent classes and mixins in the same order the mixins were
applied.</p>

<p>Filters can be synchronous, or return a promise (which will pause the
before/respond/after chain until it resolves).</p>

<p>If a before filter returns any value (or returns a promise which resolves
to any value) other than null or undefined, Denali will attempt to render
that response and halt further processing of the request (including
remaining before filters).</p>
</div>
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L47'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item property' id='config' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            config<span class="type">:Object</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L80'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 80</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>The application config</p>
</div>
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L80'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
  
    
  
    
  
    
  
  
    
      <div class='item method' id='_buildFilterChains' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            _buildFilterChains<span class='param-paren'>(</span><span class='params'></span><span class='param-paren'>)</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L249'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 249</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Walk the prototype chain of this Action instance to find all the <code class="highlighter-rouge">before</code>
and <code class="highlighter-rouge">after</code> arrays to build the complete filter chains.</p>

<p>Caches the result on the child Action class to avoid the potentially
expensive prototype walk on each request.</p>

<p>Throws if it encounters the name of a filter method that doesn’t exist.</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <p class="no-params">No parameters</p>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Object</div>
              
                <div class='return-description'><p>an object with <code class="highlighter-rouge">beforeChain</code> and <code class="highlighter-rouge">afterChain</code> arrays,
each containing the filter method names as strings</p>
</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L249'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item method' id='_invokeFilters' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            _invokeFilters<span class='param-paren'>(</span><span class='params'><span class='param'><span class='param-name'>chain</span><span class='param-type type'>:String[]</span></span><span class='param'><span class='param-name'>params</span><span class='param-type type'>:Object</span></span><span class='param'><span class='param-name'>allowHalt</span><span class='param-type type'>:Boolean</span></span></span><span class='param-paren'>)</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L286'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 286</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Invokes the filters in the supplied chain in sequence. If the <code class="highlighter-rouge">allowHalt</code>
flag is true, then filters which return non-null/undefined values will
halt the filter chain and their return value will be rendered.</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <div class='params'>
              
                <div class='param'>
                  <div class='param-name'>chain</div><div class='param-type type'>:String[]</div>
                  
                    <div class='param-description'><p>an array of filter method names to invoke in order</p>
</div>
                  
                </div>
              
                <div class='param'>
                  <div class='param-name'>params</div><div class='param-type type'>:Object</div>
                  
                    <div class='param-description'><p>the incoming request params</p>
</div>
                  
                </div>
              
                <div class='param'>
                  <div class='param-name'>allowHalt</div><div class='param-type type'>:Boolean</div>
                  
                    <div class='param-description'><p>should return values halt the chain and render?</p>
</div>
                  
                </div>
              
            </div>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Promise</div>
              
                <div class='return-description'><p>resolves once the chain is complete, rejects if the
chain was halted.</p>
</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L286'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item method' id='_pickBestResponder' data-private-member=true>
        <h3 class='item-title'>
          <div class='item-descriptor'>
            _pickBestResponder<span class='param-paren'>(</span><span class='params'></span><span class='param-paren'>)</span>
            
              <div class='private tag'>Private</div>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L213'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 213</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Find the best responder method for the incoming request, given the
incoming request’s Accept header.</p>

<p>If the Accept header is “Accept: * / *”, then the generic <code class="highlighter-rouge">respond()</code>
method is selected. Otherwise, attempt to find the best responder method
based on the mime types.</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <p class="no-params">No parameters</p>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Function</div>
              
                <div class='return-description'><p>the best match responder method</p>
</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L213'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
  
    
  
    
  
    
      <div class='item method' id='modelFor' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            modelFor<span class='param-paren'>(</span><span class='params'><span class='param'><span class='param-name'>type</span><span class='param-type type'>:String</span></span></span><span class='param-paren'>)</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L96'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 96</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Fetch a model class by it’s type string, i.e. ‘post’ =&gt; PostModel</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <div class='params'>
              
                <div class='param'>
                  <div class='param-name'>type</div><div class='param-type type'>:String</div>
                  
                    <div class='param-description'><p>the model type string</p>
</div>
                  
                </div>
              
            </div>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Model</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L96'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item method' id='render' data-private-member=true>
        <h3 class='item-title'>
          <div class='item-descriptor'>
            render<span class='param-paren'>(</span><span class='params'><span class='param'><span class='param-name'>response</span><span class='param-type type'>:Model|Model[]|Response]</span></span></span><span class='param-paren'>)</span>
            
              <div class='private tag'>Private</div>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L118'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 118</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Render some supplied data to the response. Data can be:</p>

<ul>
  <li>a Model instance</li>
  <li>an array of Model instances</li>
  <li>a Denali.Response instance</li>
</ul>
</div>

          <div class='item-header'>Parameters</div>
          
            <div class='params'>
              
                <div class='param'>
                  <div class='param-name'>response</div><div class='param-type type'>:Model|Model[]|Response]</div>
                  
                </div>
              
            </div>
          

          <div class='item-header'>Returns</div>
          
            <p class="no-return">Returns <code>undefined</code></p>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L118'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item method' id='run' data-private-member=true>
        <h3 class='item-title'>
          <div class='item-descriptor'>
            run<span class='param-paren'>(</span><span class='params'></span><span class='param-paren'>)</span>
            
              <div class='private tag'>Private</div>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L166'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 166</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Invokes the action. Determines the best responder method for content
negotiation, then executes the filter/responder chain in sequence,
handling errors and rendering the response.</p>

<p>You shouldn’t invoke this directly - Denali will automatically wire up
your routes to this method.</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <p class="no-params">No parameters</p>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Promise</div>
              
                <div class='return-description'><p>resolves when the filter/responder chain is complete,
i.e. when the action is finished</p>
</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L166'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
    
      <div class='item method' id='service' >
        <h3 class='item-title'>
          <div class='item-descriptor'>
            service<span class='param-paren'>(</span><span class='params'><span class='param'><span class='param-name'>type</span><span class='param-type type'>:String</span></span></span><span class='param-paren'>)</span>
            
            <a class='defined-in' href='https://github.com/davewasmer/denali/blob/v0.0.5/lib%2Fruntime%2Faction.js#L107'>
              <span class='filename'>Defined in: lib/runtime/action.js</span>
              <span class='line'>Line: 107</span>
            </a>
          </div>
        </h3>
        <div class='item-body'>
          <div class='item-header'>Description</div>
          <div class='item-description'><p>Fetch a service by it’s container name, i.e. ‘email’ =&gt; ‘services/email.js’</p>
</div>

          <div class='item-header'>Parameters</div>
          
            <div class='params'>
              
                <div class='param'>
                  <div class='param-name'>type</div><div class='param-type type'>:String</div>
                  
                    <div class='param-description'><p>the service name</p>
</div>
                  
                </div>
              
            </div>
          

          <div class='item-header'>Returns</div>
          
            <div class='return'>
              <div class='return-type type'>Service</div>
              
            </div>
          
          <div class='improve'>
            <a target='_blank' href='https://github.com/davewasmer/denali/edit/v0.0.5/lib%2Fruntime%2Faction.js#L107'>
              Improve this documentation
            </a>
          </div>
        </div>
      </div>
    
  
</div>

<script>
  $(function() {
    [ 'private', 'deprecated' ].forEach(function(type) {
      var $toggle = $('#toggle-' + type + '-members');
      $toggle.on('change', function() {
        if ($toggle.is(':checked')) {
          $('[data-' + type + '-member]').css('display', 'block');
        } else {
          $('[data-' + type + '-member]').css('display', 'none');
        }
      });
      if ($(window.location.hash).attr('data-' + type + '-member')) {
        $toggle.click();
      }
    });
  });
</script>

    </div>
  </div>
</div>

<script>
  $(function() {
    var $privateClassToggle = $('#toggle-private-classes');
    $privateClassToggle.on('change', function() {
      if ($privateClassToggle.is(':checked')) {
        $('.api-nav [data-private-class]').css('display', 'block');
      } else {
        $('.api-nav [data-private-class]').css('display', 'none');
      }
    });
    
  });
</script>

<footer class="footer">
  <div class='container'>
    Made with <img src='images/fox-and-beard.svg' class='fox-and-beard'> at
    <a href='http://foxandbeard.co' target='_blank'>Fox and Beard</a>
  </div>
</footer>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
    function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='//www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X','auto');ga('send','pageview');
</script>


  </body>
</html>
